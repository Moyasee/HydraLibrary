import{i as c}from"./index-CNAwNWEf.js";import{c as E,r as C,d as h,g as p}from"./firebase-connection-D9-JVH6U.js";async function y(){try{const n=(await(await fetch("./data/resources.json")).json()).sources;document.getElementById("sourcesCount").textContent=n.length;const a=n.reduce((t,s)=>t+(parseInt(s.gamesCount)||0),0);document.getElementById("gamesCount").textContent=a.toLocaleString();try{const t=new Promise((u,d)=>setTimeout(()=>d(new Error("Firebase request timed out")),5e3)),s=C(h,"sources"),g=p(s),i=(await Promise.race([g,t])).val();if(i){const u=Object.values(i).reduce((d,m)=>{const l=m.stats||{};return d+(l.installs||0)+(l.copies||0)},0);document.getElementById("actionsCount").textContent=u.toLocaleString()}else document.getElementById("actionsCount").textContent="0"}catch{console.log("Firebase stats unavailable - connection limit reached or timeout"),document.getElementById("actionsCount").textContent="0"}document.querySelectorAll(".text-2xl").forEach((t,s)=>{setTimeout(()=>{t.classList.add("animate-fade-in")},s*100)})}catch(o){console.error("Error loading statistics:",o),document.getElementById("sourcesCount").textContent="0",document.getElementById("gamesCount").textContent="0",document.getElementById("actionsCount").textContent="0"}}document.addEventListener("DOMContentLoaded",async()=>{await E.initialize(),y();const o=()=>{c.updatePageContent(),setTimeout(()=>c.updatePageContent(),100)};o(),document.addEventListener("languageChanged",o);const r=document.getElementById("language-switcher"),n=document.getElementById("language-dropdown");r.addEventListener("click",e=>{e.stopPropagation(),n.classList.toggle("hidden")}),document.querySelectorAll("[data-lang]").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.lang;c.setLocale(t),n.classList.add("hidden")})}),document.addEventListener("click",()=>{n.classList.add("hidden")});const a=()=>{const e=r.querySelector("span"),t={en:"English",ru:"Русский","pt-br":"Português"};e.textContent=t[c.currentLocale]||"English"};document.addEventListener("languageChanged",a),a()});
