import"./pt-br-x9OdUgem.js";import{c as p,r as f,d as w,g as I,i as B}from"./index-DKaHddXO.js";async function x(){const e=new Date().getTime(),t=await fetch(`./data/resources.json?t=${e}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!t.ok)throw new Error("Failed to fetch resources");return t.json()}window.addEventListener("load",async()=>{await p.initialize(),C()});async function C(){try{document.getElementById("sourcesCount").textContent="0",document.getElementById("gamesCount").textContent="0",document.getElementById("actionsCount").textContent="0";const t=(await x()).sources,s=document.getElementById("sourcesCount");u(s,t.length);const l=t.reduce((n,o)=>n+(parseInt(o.gamesCount)||0),0),r=document.getElementById("gamesCount");u(r,l);try{const n=new Promise((g,i)=>setTimeout(()=>i(new Error("Firebase request timed out")),5e3)),o=f(w,"sources"),a=I(o),m=(await Promise.race([a,n])).val();if(m){const g=Object.values(m).reduce((h,y)=>{const E=y.stats||{};return h+(E.installs||0)+(E.copies||0)},0),i=document.getElementById("actionsCount");u(i,g)}else document.getElementById("actionsCount").textContent="0"}catch{console.log("Firebase stats unavailable - connection limit reached or timeout"),document.getElementById("actionsCount").textContent="0"}}catch(e){console.error("Error loading statistics:",e),document.getElementById("sourcesCount").textContent="0",document.getElementById("gamesCount").textContent="0",document.getElementById("actionsCount").textContent="0"}}function u(e,t){const r=33.333333333333336;let n=0;const o=t/60,a=()=>{n+=o,n>t&&(n=t),e.textContent=Math.floor(n).toLocaleString(),n<t&&setTimeout(a,r)};a()}setInterval(C,3e5);const d=document.getElementById("language-switcher"),c=document.getElementById("language-dropdown");d.addEventListener("click",()=>{c.classList.toggle("hidden")});document.addEventListener("click",e=>{d.contains(e.target)||c.classList.add("hidden")});c.querySelectorAll("button").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.lang;B.setLocale(t),c.classList.add("hidden");const s={en:"English",ru:"Русский","pt-br":"Português"};d.querySelector("span").textContent=s[t]})});
