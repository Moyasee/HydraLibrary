import{r as f,d as C,g as y,i as w}from"./index-CA5maDKP.js";async function I(){const e=new Date().getTime(),t=await fetch(`./data/resources.json?t=${e}`,{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!t.ok)throw new Error("Failed to fetch resources");return t.json()}async function h(){try{document.getElementById("sourcesCount").textContent="0",document.getElementById("gamesCount").textContent="0",document.getElementById("actionsCount").textContent="0";const t=(await I()).sources,o=document.getElementById("sourcesCount");i(o,t.length);const l=t.reduce((r,d)=>r+(parseInt(d.gamesCount)||0),0),c=document.getElementById("gamesCount");i(c,l);const n=f(C,"sources"),s=(await y(n)).val();if(s){const r=Object.values(s).reduce((E,p)=>{const g=p.stats||{};return E+(g.installs||0)+(g.copies||0)},0),d=document.getElementById("actionsCount");i(d,r)}}catch(e){console.error("Error loading statistics:",e)}}function i(e,t){const c=33.333333333333336;let n=0;const m=t/60,s=()=>{n+=m,n>t&&(n=t),e.textContent=Math.floor(n).toLocaleString(),n<t&&setTimeout(s,c)};s()}window.addEventListener("load",h);setInterval(h,3e5);const u=document.getElementById("language-switcher"),a=document.getElementById("language-dropdown");u.addEventListener("click",()=>{a.classList.toggle("hidden")});document.addEventListener("click",e=>{u.contains(e.target)||a.classList.add("hidden")});a.querySelectorAll("button").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.lang;w.setLocale(t),a.classList.add("hidden");const o={en:"English",ru:"Русский","pt-br":"Português"};u.querySelector("span").textContent=o[t]})});
